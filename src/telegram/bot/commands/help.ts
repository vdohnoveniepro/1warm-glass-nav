// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help
import { Message } from 'node-telegram-bot-api';
import { BotCommand } from '../types';
import { createDivider } from '../utils';
import { MINI_APP_URL } from '../config';

/**
 * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /help - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∫–∏ –∏ —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥
 */
export default async function helpCommand(msg: Message): Promise<void> {
  const bot = global.bot;
  const chatId = msg.chat.id;
  
  // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
  const commandsList = [
    `${BotCommand.START} - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º`,
    `${BotCommand.HELP} - –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥`,
    `${BotCommand.REGISTER} - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ —Å–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç`,
    `${BotCommand.PROFILE} - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ`,
    `${BotCommand.APPOINTMENTS} - –í–∞—à–∏ –∑–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–∏–µ–º`,
    `${BotCommand.NEW_APPOINTMENT} - –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º`,
    `${BotCommand.CANCEL_APPOINTMENT} - –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º`,
    `${BotCommand.NOTIFICATIONS} - –í–∞—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è`,
    `${BotCommand.SETTINGS} - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞`,
    `${BotCommand.SPECIALISTS} - –°–ø–∏—Å–æ–∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤`,
    `${BotCommand.SERVICES} - –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥`,
    `${BotCommand.CONTACT} - –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏`,
    `${BotCommand.WEBSITE} - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç`,
    `${BotCommand.REVIEWS} - –û—Ç–∑—ã–≤—ã –æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞—Ö`,
    `${BotCommand.ARTICLES} - –°—Ç–∞—Ç—å–∏ –∏ –Ω–æ–≤–æ—Å—Ç–∏`,
  ].join('\n');
  
  // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø—Ä–∞–≤–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  const helpMessage = `
üìö *–°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ"*

–í–æ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

${commandsList}

${createDivider()}

üì± *Mini App*
–î–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å Mini App.

üí¨ *–ü–æ–¥–¥–µ—Ä–∂–∫–∞*
–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É /contact, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.

üåê *–í–µ–±-—Å–∞–π—Ç*
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ü–µ–Ω—Ç—Ä–µ "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ" –ø–æ—Å–µ—Ç–∏—Ç–µ –Ω–∞—à –≤–µ–±-—Å–∞–π—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É /website.
  `;
  
  // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App
  const keyboard = {
    inline_keyboard: [
      [{
        text: 'üì± –û—Ç–∫—Ä—ã—Ç—å Mini App',
        web_app: { url: MINI_APP_URL }
      }]
    ]
  };
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ø—Ä–∞–≤–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π
  await bot.sendMessage(chatId, helpMessage, {
    parse_mode: 'Markdown',
    reply_markup: keyboard
  });
} 