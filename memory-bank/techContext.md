# Технический контекст проекта "Вдохновение"

## Архитектура приложения

### Frontend
- **Framework**: Next.js 15.2.4
- **UI Library**: React 19
- **Язык**: TypeScript
- **Стилизация**: Tailwind CSS
- **Состояние**: Zustand для глобального состояния
- **Формы**: React Hook Form для управления формами
- **Компоненты**: Комбинация собственных компонентов и библиотек (@headlessui/react, @radix-ui/react)

### Backend
- **API Routes**: Next.js API Routes для серверной логики
- **Express**: Для некоторых дополнительных серверных функций
- **Аутентификация**: JWT и Next-Auth
- **Файловое хранилище**: Локальное хранилище файлов

### База данных
- **СУБД**: SQLite
- **ORM/Драйвер**: Better-SQLite3 (прямой доступ)
- **Миграции**: Собственная система миграций
- **Схема**: Определена в src/database/schema.ts

### Интеграции
- **Telegram Bot API**: Для бота и мини-приложения
- **Электронная почта**: Nodemailer для отправки писем

## Структура кода

### Клиентские компоненты
- **Страницы**: Определены в src/app с использованием структуры маршрутизации Next.js App Router
- **Компоненты**: Многоразовые компоненты в src/components
- **Хуки**: Пользовательские React хуки в src/hooks

### Серверные компоненты
- **API Routes**: Определены в src/app/api
- **Middleware**: Для аутентификации и обработки запросов
- **Сервисы**: Бизнес-логика в src/services

### Типы данных
- **Интерфейсы**: Определены в src/types и src/models
- **Схемы**: Схемы базы данных в src/database/schema.ts

## Основные технические решения

### Аутентификация
- Комбинация JWT и Next-Auth для различных сценариев аутентификации
- Поддержка аутентификации через Telegram

### Управление состоянием
- Zustand для глобального состояния приложения
- React Context для локального состояния компонентов
- React Query для кэширования и управления асинхронными запросами

### Маршрутизация
- Next.js App Router для определения маршрутов
- Группы маршрутов для организации функциональности (admin, public, cabinet)

### Стилизация
- Tailwind CSS для стилизации компонентов
- Адаптивный дизайн для мобильных и десктопных устройств
- Темная и светлая темы

### Работа с данными
- Прямой доступ к SQLite через Better-SQLite3
- Собственная система миграций для управления схемой базы данных
- Адаптеры для совместимости с различными источниками данных

## Технические вызовы и решения

### Производительность
- Оптимизация загрузки данных с использованием кэширования
- Ленивая загрузка компонентов для ускорения начальной загрузки
- Оптимизация запросов к базе данных

### Масштабируемость
- Модульная архитектура для легкого расширения функциональности
- Четкое разделение ответственности между компонентами
- Использование паттернов для повторного использования кода

### Безопасность
- Проверка прав доступа на уровне API и UI
- Защита от распространенных уязвимостей (XSS, CSRF)
- Безопасное хранение чувствительных данных

## Инструменты разработки
- **IDE**: Cursor (основан на VS Code)
- **Управление зависимостями**: npm
- **Сборка**: Next.js встроенный сборщик
- **Линтинг**: ESLint
- **Форматирование**: Prettier
- **Тестирование**: Jest (планируется)
